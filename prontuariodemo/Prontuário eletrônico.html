<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>Prontu√°rio Eletr√¥nico - Psicologia (DEMO)</title>
  <style>
    :root{--bg:#f7f7fb;--card:#ffffff;--muted:#6b7280;--accent:#6b46c1;--accent-hover:#553c9a;--danger:#e53e3e;--border:#e6e9ee}
    body{font-family:Inter, ui-sans-serif, system-ui, -apple-system, sans-serif; background:var(--bg); color:#111; margin:0; padding:20px; overflow-x:hidden; padding-bottom: 60px; position: relative;}
    .container{max-width:900px;margin:0 auto; position: relative; z-index: 10;}
    
    /* Header e Nav */
    .top-bar{display:flex;justify-content:space-between;align-items:center;margin-bottom:20px}
    .nav-tabs{display:flex;gap:10px;border-bottom:2px solid #e6e9ee;padding-bottom:2px; width: 100%}
    .tab-btn{background:none;border:none;padding:10px 20px;font-size:15px;font-weight:600;color:var(--muted);cursor:pointer;border-bottom:3px solid transparent;transition:0.3s}
    .tab-btn.active{color:var(--accent);border-bottom-color:var(--accent)}
    .tab-btn:hover{color:#333}

    /* P√°ginas */
    .page-content{display:none;animation:fadeIn 0.4s ease}
    .page-content.active{display:block}
    @keyframes fadeIn{from{opacity:0;transform:translateX(10px)} to{opacity:1;transform:translateX(0)}}

    /* Estilos Gerais */
    .card{background:var(--card);border-radius:12px;padding:24px;box-shadow:0 4px 12px rgba(0,0,0,0.05);margin-bottom:16px;border:1px solid var(--border); position: relative;}
    h1, h2{margin-top:0;color:#111}
    h1{font-size:22px;margin-bottom:5px}
    h2{font-size:18px;margin-bottom:15px;border-bottom:1px solid #eee;padding-bottom:8px}
    
    .header-flex{display:flex; justify-content:space-between; align-items: flex-start;}

    label{display:block;font-weight:600;font-size:13px;margin-bottom:6px;color:#374151;margin-top:12px}
    label:first-child{margin-top:0}
    input, textarea, select{width:100%;padding:10px;border-radius:8px;border:1px solid var(--border);font-size:14px;box-sizing:border-box;font-family:inherit;transition:0.2s}
    input:focus, textarea:focus{border-color:var(--accent);outline:none;box-shadow:0 0 0 3px rgba(107,70,193,0.1)}
    textarea{resize:vertical;min-height:100px}
    
    .row{display:flex;gap:16px}
    .col{flex:1}
    .col-small{flex:0 0 140px}
    .muted{color:var(--muted);font-size:13px}

    /* Bot√µes */
    .actions{display:flex;gap:10px;justify-content:flex-end;margin-top:20px; flex-wrap: wrap;}
    .btn{background:var(--accent);color:#fff;padding:12px 18px;border-radius:8px;border:none;cursor:pointer;font-weight:600;font-size:14px;transition:0.2s}
    .btn:hover{background:var(--accent-hover)}
    .btn.secondary{background:#e6e7ee;color:#333}
    .btn.secondary:hover{background:#d1d5db}
    .btn.danger{background:#fee2e2; color:#c53030; border:1px solid #fecaca; padding: 8px 12px; font-size:13px;}
    .btn.danger:hover{background:#fecaca}

    /* √Årea de Campos Personalizados */
    .custom-creator{background:#f0fdf4; border:1px dashed #86efac; padding:15px; border-radius:8px; margin-top:20px; display:flex; gap:10px; align-items:center}
    .custom-creator input{margin:0}
    .btn-add{background:#22c55e;color:#fff;border:none;border-radius:6px;padding:10px;cursor:pointer;font-weight:bold}
    .btn-remove{position:absolute; top:15px; right:15px; background:none; border:none; color:#e53e3e; cursor:pointer; font-size:18px; font-weight:bold}

    /* Rodap√© */
    footer{text-align:center; margin-top:40px; color:#9ca3af; font-size:12px; border-top:1px solid #e6e9ee; padding-top:20px}

    /* --- MARCA D'√ÅGUA (TELA) --- */
    .screen-watermark {
        position: fixed;
        top: 0; left: 0;
        width: 100vw; height: 100vh;
        z-index: 5; /* Acima do background, abaixo do container */
        pointer-events: none; /* Permite clicar atrav√©s */
        display: flex;
        flex-direction: column;
        justify-content: space-between;
        overflow: hidden;
        opacity: 0.08; /* Bem sutil */
    }
    .screen-watermark div {
        font-size: 5rem;
        font-weight: 900;
        color: #000;
        text-transform: uppercase;
        white-space: nowrap;
        transform: rotate(-10deg) scale(1.2);
        margin: 20px 0;
        text-align: center;
    }

    @media (max-width:640px){.row{flex-direction:column}.col-small{flex:auto}.top-bar{flex-direction:column; gap:10px; align-items:flex-start}}
  </style>
</head>
<body>

<div class="screen-watermark">
    <div>VERS√ÉO DEMO</div>
    <div>VERS√ÉO DEMO</div>
    <div>VERS√ÉO DEMO</div>
    <div>VERS√ÉO DEMO</div>
    <div>VERS√ÉO DEMO</div>
</div>

<div class="container">
  
  <div class="top-bar">
    <nav class="nav-tabs">
      <button class="tab-btn active" onclick="switchTab('session')">üìù Registro de Sess√£o</button>
      <button class="tab-btn" onclick="switchTab('cover')">üìÇ Capa do Prontu√°rio</button>
    </nav>
  </div>

  <div id="tab-session" class="page-content active">
    <div class="header-flex">
      <header style="margin-bottom:20px">
        <h1>Registro de Sess√£o</h1>
        <div class="muted">Anota√ß√µes e evolu√ß√£o di√°ria</div>
      </header>
      <button onclick="clearTab('session')" class="btn danger">üóëÔ∏è Limpar Sess√£o</button>
    </div>

    <div class="card">
      <div class="row">
        <div class="col">
          <label>Nome do Paciente</label>
          <input type="text" id="sess_patientName" placeholder="Ex: Jo√£o da Silva">
        </div>
        <div class="col">
          <label>Local da Sess√£o</label>
          <input type="text" id="sess_location" placeholder="Ex: Consult√≥rio / On-line">
        </div>
      </div>
    </div>

    <div class="card">
      <label>Rascunho (Anota√ß√µes Livres)</label>
      <textarea id="sess_draft" placeholder="Escreva livremente durante a sess√£o..."></textarea>
    </div>

    <div class="card">
      <h2>Evolu√ß√£o Formal</h2>
      <div class="row">
        <div class="col-small">
          <label>Data</label>
          <input type="date" id="sess_date">
        </div>
        <div class="col-small">
          <label>Hor√°rio</label>
          <input type="time" id="sess_time">
        </div>
        <div class="col-small">
          <label>Sess√£o N¬∫</label>
          <input type="text" id="sess_number" placeholder="Ex: 05">
        </div>
      </div>

      <label>Descri√ß√£o da Evolu√ß√£o</label>
      <textarea id="sess_evolution" style="min-height:120px" placeholder="Descreva o andamento, humor, insights..."></textarea>

      <label>Interven√ß√µes / T√©cnicas</label>
      <textarea id="sess_intervention" style="min-height:80px" placeholder="T√©cnicas utilizadas..."></textarea>
      
      <label>Formula√ß√£o / Hip√≥tese</label>
      <textarea id="sess_formulation" style="min-height:60px" placeholder="Notas cl√≠nicas..."></textarea>
    </div>

    <div id="dynamic-area-session"></div>

    <div class="custom-creator">
      <input type="text" id="new-field-session" placeholder="Nome do novo campo (ex: Tarefa de Casa)">
      <button class="btn-add" onclick="addCustomField('session')">Adicionar +</button>
    </div>

    <div class="actions">
      <button onclick="saveSession('draft')" class="btn secondary">Salvar Rascunho (Demo)</button>
      <button onclick="saveSession('evolution')" class="btn">Salvar Evolu√ß√£o (Demo)</button>
    </div>
  </div>

  <div id="tab-cover" class="page-content">
    <div class="header-flex">
      <header style="margin-bottom:20px">
        <h1>Capa de Prontu√°rio</h1>
        <div class="muted">Dados cadastrais e queixa inicial</div>
      </header>
      <button onclick="clearTab('cover')" class="btn danger">üóëÔ∏è Limpar Capa</button>
    </div>

    <div class="card">
      <h2>Identifica√ß√£o Profissional</h2>
      <div class="row">
        <div class="col">
          <label>Psic√≥logo(a)</label>
          <input type="text" id="capa_psi" placeholder="Seu nome completo">
        </div>
        <div class="col-small">
          <label>Prontu√°rio N¬∫</label>
          <input type="number" id="capa_num" placeholder="01">
        </div>
        <div class="col-small">
          <label>Sala</label>
          <input type="text" id="capa_sala" placeholder="Ex: 01">
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Identifica√ß√£o do Paciente</h2>
      <label>Nome Completo</label>
      <input type="text" id="capa_nome">

      <div class="row">
        <div class="col">
          <label>Data de Nascimento</label>
          <input type="date" id="capa_nasc">
        </div>
        <div class="col-small">
          <label>Idade</label>
          <input type="text" id="capa_idade">
        </div>
      </div>

      <div class="row">
        <div class="col">
          <label>CPF</label>
          <input type="text" id="capa_cpf" placeholder="000.000.000-00">
        </div>
        <div class="col">
          <label>Contato (Tel/Email)</label>
          <input type="text" id="capa_contato">
        </div>
      </div>

      <label>Nome Respons√°vel e Parentesco (se menor)</label>
      <input type="text" id="capa_resp" placeholder="Ex: Maria (M√£e)">

      <div class="row">
        <div class="col">
          <label>Data da Primeira Sess√£o</label>
          <input type="date" id="capa_data_inicio">
        </div>
      </div>
    </div>

    <div class="card">
      <h2>Demanda Inicial</h2>
      <label>Motivo do Atendimento - Queixa / Demanda</label>
      <textarea id="capa_queixa" style="min-height:150px" placeholder="Relat√≥rio sint√©tico da demanda inicial..."></textarea>
    </div>

    <div id="dynamic-area-cover"></div>

    <div class="custom-creator">
      <input type="text" id="new-field-cover" placeholder="Nome do novo campo (ex: Medica√ß√µes)">
      <button class="btn-add" onclick="addCustomField('cover')">Adicionar +</button>
    </div>

    <div class="actions">
      <button onclick="generateCoverPDF()" class="btn">üìÑ Gerar Capa (Demo)</button>
    </div>
  </div>

  <footer>
    &copy; 2025 Gabriel Vin√≠cius. Todos os direitos reservados.
  </footer>

  <div id="pdf-container" style="display:none">
    <div id="pdf-content" style="padding:30px; font-family: 'Times New Roman', serif; color:#000; line-height:1.5; position:relative;"></div>
  </div>

</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.3/html2pdf.bundle.min.js"></script>
<script>
  // --- ABAS ---
  function switchTab(tabName){
    document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
    document.querySelectorAll('.page-content').forEach(p => p.classList.remove('active'));
    
    const btnIndex = tabName === 'session' ? 0 : 1;
    document.querySelectorAll('.tab-btn')[btnIndex].classList.add('active');
    document.getElementById(`tab-${tabName}`).classList.add('active');
  }

  // --- UTILIT√ÅRIOS ---
  const getVal = (id) => { const el = document.getElementById(id); return (el && el.value) ? el.value : ''; };
  const getDisplayVal = (id) => { const val = getVal(id); return val === '' ? '-' : val; };
  const setVal = (id, val) => { if(document.getElementById(id)) document.getElementById(id).value = val || ''; };
  const escapeHtml = (text) => { if(!text) return ''; return String(text).replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;').replace(/\n/g,'<br>'); }
  const formatDate = (isoDate) => { if(!isoDate) return '-'; return isoDate.split('-').reverse().join('/'); }

  // --- CAMPOS PERSONALIZADOS ---
  function addCustomField(context, labelText = null, savedValue = ''){
    const inputId = `new-field-${context}`;
    const label = labelText || document.getElementById(inputId).value;
    
    if(!label) return alert('Digite um nome para o campo!');
    if(!labelText) document.getElementById(inputId).value = ''; // limpa input se for novo

    const fieldId = `custom_${context}_${Date.now()}_${Math.random().toString(36).substr(2,9)}`;
    
    const div = document.createElement('div');
    div.className = 'card';
    div.dataset.id = fieldId;
    div.dataset.label = label;
    div.dataset.context = context;
    div.innerHTML = `
      <button class="btn-remove" onclick="removeCustomField(this)" title="Remover campo">&times;</button>
      <label>${label}</label>
      <textarea id="${fieldId}" placeholder="Digite aqui...">${savedValue}</textarea>
    `;

    document.getElementById(`dynamic-area-${context}`).appendChild(div);
    if(!labelText) saveData(); 
  }

  function removeCustomField(btn){
    if(confirm('Tem certeza que deseja remover este campo?')){
      btn.parentElement.remove();
      saveData();
    }
  }

  function getCustomFieldsHTML(context){
    const container = document.getElementById(`dynamic-area-${context}`);
    const cards = container.querySelectorAll('.card');
    let html = '';
    cards.forEach(card => {
      const label = card.dataset.label;
      const val = card.querySelector('textarea').value;
      if(val.trim() !== ''){
        html += `<h3>${label}</h3><div style="text-align:justify">${escapeHtml(val)}</div>`;
      }
    });
    return html;
  }

  // --- LIMPEZA INDIVIDUAL ---
  function clearTab(context){
    const msg = context === 'session' ? 'SESS√ÉO' : 'CAPA DE PRONTU√ÅRIO';
    if(!confirm(`ATEN√á√ÉO: Deseja limpar apenas os dados da ${msg}?\nIsso n√£o afeta a outra aba.`)) return;

    const container = document.getElementById(`tab-${context}`);
    container.querySelectorAll('input, textarea').forEach(el => {
      if(!el.id.startsWith('new-field')) el.value = '';
    });

    document.getElementById(`dynamic-area-${context}`).innerHTML = '';

    if(context === 'session'){
       localStorage.removeItem('psi_session_data');
    } else {
       localStorage.removeItem('psi_cover_data');
    }

    let customs = JSON.parse(localStorage.getItem('psi_custom_fields') || '[]');
    customs = customs.filter(c => c.context !== context);
    localStorage.setItem('psi_custom_fields', JSON.stringify(customs));

    alert(`Dados da ${msg} limpos com sucesso!`);
  }

  // --- PERSIST√äNCIA ---
  function loadData(){
    try {
      const sessData = JSON.parse(localStorage.getItem('psi_session_data') || '{}');
      setVal('sess_patientName', sessData.name);
      setVal('sess_location', sessData.loc);
      setVal('sess_draft', sessData.draft);
      setVal('sess_evolution', sessData.evo);
      setVal('sess_intervention', sessData.inter);
      setVal('sess_formulation', sessData.form);
      setVal('sess_date', sessData.date);
      setVal('sess_time', sessData.time);
      setVal('sess_number', sessData.number);

      const coverData = JSON.parse(localStorage.getItem('psi_cover_data') || '{}');
      setVal('capa_psi', coverData.psi);
      setVal('capa_num', coverData.num);
      setVal('capa_sala', coverData.sala);
      setVal('capa_nome', coverData.nome);
      setVal('capa_nasc', coverData.nasc);
      setVal('capa_idade', coverData.idade);
      setVal('capa_cpf', coverData.cpf);
      setVal('capa_contato', coverData.contato);
      setVal('capa_resp', coverData.resp);
      setVal('capa_data_inicio', coverData.dataIni);
      setVal('capa_queixa', coverData.queixa);

      const customs = JSON.parse(localStorage.getItem('psi_custom_fields') || '[]');
      document.getElementById('dynamic-area-session').innerHTML = '';
      document.getElementById('dynamic-area-cover').innerHTML = '';
      
      customs.forEach(field => {
        addCustomField(field.context, field.label, field.value);
      });

    } catch(e){ console.log('Erro ao carregar dados', e); }
  }

  function saveData(){
    const sessPayload = {
      name: getVal('sess_patientName'),
      loc: getVal('sess_location'),
      draft: getVal('sess_draft'),
      evo: getVal('sess_evolution'),
      inter: getVal('sess_intervention'),
      form: getVal('sess_formulation'),
      date: getVal('sess_date'),
      time: getVal('sess_time'),
      number: getVal('sess_number')
    };
    localStorage.setItem('psi_session_data', JSON.stringify(sessPayload));

    const coverPayload = {
      psi: getVal('capa_psi'),
      num: getVal('capa_num'),
      sala: getVal('capa_sala'),
      nome: getVal('capa_nome'),
      nasc: getVal('capa_nasc'),
      idade: getVal('capa_idade'),
      cpf: getVal('capa_cpf'),
      contato: getVal('capa_contato'),
      resp: getVal('capa_resp'),
      dataIni: getVal('capa_data_inicio'),
      queixa: getVal('capa_queixa')
    };
    localStorage.setItem('psi_cover_data', JSON.stringify(coverPayload));

    let customs = [];
    document.querySelectorAll('[data-context]').forEach(el => {
      customs.push({
        context: el.dataset.context,
        label: el.dataset.label,
        value: el.querySelector('textarea').value
      });
    });
    localStorage.setItem('psi_custom_fields', JSON.stringify(customs));
  }

  setInterval(saveData, 3000);
  document.addEventListener('input', (e) => {
    if(e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA') saveData();
  });

  // --- GERADOR DE PDF ---
  async function makePdf(filename, htmlContent){
    const element = document.getElementById('pdf-content');
    element.innerHTML = htmlContent;
    document.getElementById('pdf-container').style.display = 'block';
    
    const opt = {
      margin: 15,
      filename: filename,
      image: { type: 'jpeg', quality: 0.98 },
      html2canvas: { scale: 2 },
      jsPDF: { unit: 'mm', format: 'a4', orientation: 'portrait' }
    };

    await html2pdf().set(opt).from(element).save();
    document.getElementById('pdf-container').style.display = 'none';
  }

  // FUN√á√ÉO HELPER PARA MARCA D'√ÅGUA NO PDF
  function getPdfWatermark() {
    return `
      <div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg); font-size: 80px; color: rgba(0,0,0,0.1); font-weight: bold; white-space: nowrap; z-index: 0; pointer-events: none;">
        VERS√ÉO DEMO
      </div>
      <div style="position: absolute; top: 20%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg); font-size: 80px; color: rgba(0,0,0,0.1); font-weight: bold; white-space: nowrap; z-index: 0; pointer-events: none;">
        VERS√ÉO DEMO
      </div>
       <div style="position: absolute; top: 80%; left: 50%; transform: translate(-50%, -50%) rotate(-45deg); font-size: 80px; color: rgba(0,0,0,0.1); font-weight: bold; white-space: nowrap; z-index: 0; pointer-events: none;">
        VERS√ÉO DEMO
      </div>
    `;
  }

  // PDF SESS√ÉO
  async function saveSession(type){
    saveData();
    const name = getVal('sess_patientName') || 'Paciente';
    const date = formatDate(getVal('sess_date'));
    const title = type === 'draft' ? 'RASCUNHO DE SESS√ÉO' : 'EVOLU√á√ÉO DE SESS√ÉO';
    
    let body = getPdfWatermark(); // INSERE A MARCA D'√ÅGUA

    body += `
      <div style="border-bottom:2px solid #333; padding-bottom:10px; margin-bottom:20px; position:relative; z-index:1;">
        <h2 style="margin:0; text-transform:uppercase;">${title}</h2>
        <p style="margin:5px 0 0 0;">Paciente: <b>${name}</b> | Data: ${date}</p>
      </div>
      <div style="position:relative; z-index:1;">
    `;

    if(type === 'draft'){
      body += `<h3>Anota√ß√µes / Rascunho</h3><div>${escapeHtml(getVal('sess_draft'))}</div>`;
    } else {
      body += `
        <p><b>Hor√°rio:</b> ${getDisplayVal('sess_time')} | <b>Sess√£o N¬∫:</b> ${getDisplayVal('sess_number')}</p>
        <p><b>Local:</b> ${getDisplayVal('sess_location')}</p>
        <hr>
        <h3>Evolu√ß√£o</h3>
        <div style="text-align:justify">${escapeHtml(getVal('sess_evolution'))}</div>
        <h3>Interven√ß√µes</h3>
        <div>${escapeHtml(getVal('sess_intervention'))}</div>
        <h3>Formula√ß√£o</h3>
        <div>${escapeHtml(getVal('sess_formulation'))}</div>
      `;
    }

    body += getCustomFieldsHTML('session');
    body += `</div>`; // fecha div de z-index

    await makePdf(`Sessao_${name}_${getVal('sess_date')||'data'}_DEMO.pdf`, body);
  }

  // PDF CAPA
  async function generateCoverPDF(){
    saveData();
    const nome = getVal('capa_nome') || 'Paciente';
    
    let html = getPdfWatermark(); // INSERE A MARCA D'√ÅGUA

    html += `
    <div style="position:relative; z-index:1;">
      <div style="text-align:center; border-bottom:2px solid #000; padding-bottom:10px; margin-bottom:25px">
        <h1 style="font-size:16pt; margin:0">PRONTU√ÅRIO ‚Äì RELAT√ìRIO DE EVOLU√á√ÉO</h1>
      </div>

      <table style="width:100%; border-collapse:collapse; margin-bottom:20px; font-size:12pt">
        <tr>
          <td style="padding:6px 0; font-weight:bold; width:130px">PSIC√ìLOGO:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_psi')}</td>
        </tr>
         <tr>
          <td style="padding:6px 0; font-weight:bold;">PRONTU√ÅRIO:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_num')}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">NOME:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_nome')}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">DATA NASC.:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${formatDate(getVal('capa_nasc'))}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">IDADE:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_idade')}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">RESPONS√ÅVEL:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_resp')}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">CPF:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_cpf')}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">CONTATO:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_contato')}</td>
        </tr>
        <tr>
          <td style="padding:6px 0; font-weight:bold;">DATA 1¬™ SESS√ÉO:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${formatDate(getVal('capa_data_inicio'))}</td>
        </tr>
         <tr>
          <td style="padding:6px 0; font-weight:bold;">SALA:</td>
          <td style="padding:6px 0; border-bottom:1px solid #999">${getDisplayVal('capa_sala')}</td>
        </tr>
      </table>

      <div style="background:#eee; padding:8px; font-weight:bold; border:1px solid #000; margin-top:30px; text-align:center; font-size:11pt">
        MOTIVO DO ATENDIMENTO - QUEIXA / DEMANDA - RELAT√ìRIO SINT√âTICO DE PRONTU√ÅRIO
      </div>
      <div style="border:1px solid #000; border-top:none; padding:15px; min-height:200px; text-align:justify">
        ${escapeHtml(getVal('capa_queixa'))}
      </div>

      ${getCustomFieldsHTML('cover')}
      
      <div style="margin-top:60px; text-align:center">
        <div style="border-top:1px solid #000; width:60%; margin:0 auto; padding-top:5px">
          Assinatura / Carimbo
        </div>
      </div>
    </div>
    `;

    await makePdf(`Capa_Prontuario_${nome}_DEMO.pdf`, html);
  }

  loadData();
</script>
</body>
</html>